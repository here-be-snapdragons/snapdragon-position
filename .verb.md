## What does this do?

When used as a plugin, this adds a `.position()` method to a [snapdragon-lexer][] instance, for adding [position information](#position-information) to tokens.

**Example**

```js
const position = require('snapdragon-position');
const Lexer = require('snapdragon-lexer');
const lexer = new Lexer('foo/bar');
lexer.use(position());

lexer.capture('slash', /^\//);
lexer.capture('text', /^\w+/);

var token = lexer.advance();
console.log(token);
```

Adds a `.position` object to the token, like this:

```js
Token {
  type: 'text',
  val: 'foo',
  match: [ 'foo', index: 0, input: 'foo/*' ],
  position: {
    start: { index: 0, column: 1, line: 1 },
    end: { index: 3, column: 4, line: 1 },
    range: [0, 3] // range is a getter
  } 
}
```


## Usage

The main export is a function that can either be called directly to add a `.position` to a single token, or used as a plugin function with `lexer.use()`.

{%= apidocs("index.js") %}


## Position information

```js
Position {
  start: Location { index: 0, column: 1, line: 1 },
  end: Location { index: 3, column: 4, line: 1 },
  range: [getter] // [start.index, end.index]
} 
```

## Customization

### Use .loc instead of .position

Currently no options are supported for this, but you can easily patch the `Token` used by the lexer.

**Example**

```js
const Lexer = require('snapdragon-lexer');
const lexer = new Lexer();

Object.defineProperty(lexer.Token.prototype, 'tok', {
  get: function() {
    return this.position;
  }
});
```

### Set .range on token

Currently, range is a getter on `token.position.range`. If you want `range` to be on the token, instead of `token.position`, you will need to patch the Token prototype.

```js
const Lexer = require('snapdragon-lexer');
const lexer = new Lexer();

Object.defineProperty(lexer.Token.prototype, 'range', {
  get: function() {
    return this.position.range;
  }
});
```
